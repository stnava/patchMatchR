<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Local patch matching with flexible transformation models in n-dimensional images • patchMatchR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Local patch matching with flexible transformation models in n-dimensional images">
<meta property="og:description" content="Patch matching differs from models that are global and physical.
  This packages focuses on mapping patches or blocks over an image.  The patchMatch
  yields a local patch transformation and extracted patch without interpolating
  the original images.  Thus, the matches are similar to bounding boxes.  Quality
  information and spatial locations of matching points are also returned. Masks
  define the points over which we match.  In general, this is targeted at finding
  good sparse local matches between large domain images that may only partially
  correspond.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">patchMatchR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/patchMatchR.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="patchmatchr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#patchmatchr" class="anchor"></a>patchMatchR</h1></div>
<p>very basic patch matching functionality based on ANTsR – see <a href="https://stnava.github.io/patchMatchR/">documentation</a></p>
<p><a href="https://travis-ci.org/stnava/patchMatchR"><img src="https://travis-ci.org/stnava/patchMatchR.png?branch=master" alt="Build Status"></a></p>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>installation</h3>
<pre><code><a href="https://devtools.r-lib.org/reference/remote-reexports.html">devtools::install_github( "stnava/patchMatchR")</a></code></pre>
<p>or if you have ANTsR etc installed then clone the repo and do:</p>
<pre><code>cd patchMatchR
R CMD INSTALL .</code></pre>
</div>
<div id="getting-started" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>getting started</h3>
<p>in <code>R</code></p>
<p>2D</p>
<pre><code><a href="https://rdrr.io/r/base/library.html">library( ANTsR )
library( patchMatchR )
img &lt;- ri( 1 )  %&gt;% iMath( "Normalize" )
img2 &lt;- ri( 2 )%&gt;% resampleImage( 2 ) %&gt;% iMath( "Normalize" )
mask = randomMask( getMask( img ), 10 )
match = patchMatch( img2, img, mask, visualize=T, verbose=T )
myMatches = matchedPatches( img2, img, match, verbose = TRUE )
plot( myMatches[[1]][[4]] * 100 )
plot( myMatches[[2]][[4]] * 100 )</a></code></pre>
<p>2D with pre-existing mapping</p>
<pre><code><a href="https://rdrr.io/r/base/library.html">library( ANTsR )
library( patchMatchR )
img &lt;- ri( 1 )  %&gt;% iMath( "Normalize" )
img2 &lt;- ri( 2 )%&gt;% resampleImage( 2 ) %&gt;% iMath( "Normalize" )
ireg = antsRegistration( img, img2, "SyNCC" )
mask = randomMask( getMask( img ), 10 )
match = patchMatch( img2, img, mask, visualize=T, verbose=T,
  initialMap = ireg )
myMatches = matchedPatches( img2, img, match, verbose = TRUE )
plot( myMatches[[1]][[4]] * 100 )
plot( myMatches[[2]][[4]] * 100 )</a></code></pre>
<p>3D</p>
<pre><code><a href="https://rdrr.io/r/base/library.html">library( ANTsR )
library( patchMatchR )
img &lt;- antsImageRead( getANTsRData( "ch2" ) ) %&gt;% resampleImage( 1 ) %&gt;%
  iMath( "Normalize" )
img2 &lt;- resampleImage( img, 2 ) %&gt;% iMath( "Normalize" )
mask = randomMask( getMask( img ), 25 )
myr = 15
match = patchMatch( img2, img, mask, visualize=T, verbose=T,
  fixedPatchRadius = myr )
myMatches = matchedPatches( img2, img, match, verbose = TRUE,
  fixedPatchRadius = myr+1  )
plot( myMatches[[1]][[4]] * 100 )
plot( myMatches[[2]][[4]] * 100 )</a></code></pre>
<p>TODO</p>
<ul>
<li><p>allow a probabilistic representation of matching</p></li>
<li><p>provide a method for generating transforms from the matched landmarks (my RANSAC implementation is weak)</p></li>
<li><p>test on GPU</p></li>
<li><p>compare to SIFT</p></li>
<li><p>pass a transform to deepPatchMatch s.t. moving point distance can be calculated wrt tx</p></li>
<li><p>multi-resolution strategy and/or localized refinement of matching</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>Apache License (&gt;=2.0)</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Brian B. Avants <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Brian B. Avants.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
